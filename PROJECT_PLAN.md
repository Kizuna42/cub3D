# 42school 課題「cub3D」実装計画書

## 1. 概要

本ファイルは、42school の課題「cub3D」の実装を管理するためのプロジェクト計画書です。タスクはチェックリスト形式で管理されており、完了した項目には `[x]` を付けます。

## 2. タスクリスト（実装順）

### フェーズ 0: 環境構築

- [x] **(P0-1)** `libft`と`minilibx`をプロジェクトに導入し、基本的な`Makefile`を作成する。(担当: KIZUNA, 難易度: 低, 見積: 2h)

### フェーズ 1: パーサー開発

- [x] **(P1-1)** `.cub`ファイルの情報を格納する構造体をヘッダファイルに定義する。(担当: KIZUNA, 難易度: 中, 見積: 2h)
- [x] **(P1-2)** 設定要素(`NO`, `SO`, `WE`, `EA`, `F`, `C`)を解析する機能を実装する。(担当: KIZUNA, 難易度: 高, 見積: 4h)
- [ ] **(P1-3)** マップデータを 2 次元配列に格納する機能を実装する。(担当: KIZUNA, 難易度: 中, 見積: 3h)
- [ ] **(P1-4)** マップが壁で閉じられているか検証するアルゴリズムを実装する。(担当: KIZUNA, 難易度: 高, 見積: 4h)

### フェーズ 2: アセットとテスト準備

- [ ] **(P2-1)** 壁用のテクスチャ画像（`.xpm`形式）を収集・選定する。(担当: KANA, 難易度: 低, 見積: 2h)
- [ ] **(P2-2)** 動作確認用の`.cub`ファイル（正常/エラーケース）を作成する。(担当: KANA, 難易度: 低, 見積: 2h)

### フェーズ 3: 基本描画

- [ ] **(P3-1)** ウィンドウを開き、床と天井を指定色で描画する。(担当: KIZUNA, 難易度: 中, 見積: 2h)

### フェーズ 4: プレイヤー操作

- [ ] **(P4-1)** キー入力に応じてプレイヤーの位置・向きを更新する。(担当: KIZUNA, 難易度: 中, 見積: 3h)

### フェーズ 5: レイトレーシング

- [ ] **(P5-1)** DDA アルゴリズムでレイと壁の交点を計算し、壁までの距離を算出する。(担当: KIZUNA, 難易度: 高, 見積: 8h)

### フェーズ 6: テクスチャマッピング

- [ ] **(P6-1)** 壁の高さと方角に応じたテクスチャの垂直線を描画する。(担当: KIZUNA, 難易度: 高, 見積: 6h)

### フェーズ 7: 統合と仕上げ

- [ ] **(P7-1)** イベント処理（`ESC`等）を実装し、メインループを完成させる。メモリ解放を徹底する。(担当: KIZUNA, 難易度: 中, 見積: 4h)

### フェーズ 8: ボーナス機能

- [ ] **(P8-1)** 壁との衝突判定を実装する。(担当: KIZUNA, 難易度: 中, 見積: 3h)
- [ ] **(P8-2)** ミニマップを描画する。(担当: KANA & KIZUNA, 難易度: 中, 見積: 4h)

## 3. 開発戦略

本プロジェクトでは、開発環境（macOS）と最終提出環境（Linux）の差異を吸収するため、**OS 依存の処理を隔離する「抽象化レイヤー」**を導入します。

- **`src/`ディレクトリ:** OS に依存しない、プロジェクトのコアロジック（パーサー、レイトレーシング等）を配置します。
- **`platform/`ディレクトリ:** OS 固有の`minilibx`関数呼び出しやキーコード定義などを、`macos/`と`linux/`に分離して格納します。
- **`Makefile`:** 開発環境の OS を自動判別し、コンパイル対象のソースファイルとライブラリフラグを動的に切り替えます。

これにより、普段の開発は macOS で高速に行い、Linux 環境での動作確認もスムーズに行うことを目指します。
